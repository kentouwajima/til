**「暗号化（Encryption）」分野の要点まとめ**

---

## 全体像（最重要）

SAAの暗号化問題は、以下の3点を理解していれば解ける。

1. **保存時の暗号化（At Rest）**
2. **通信時の暗号化（In Transit）**
3. **鍵の管理（AWS KMS）**

---

## 1. 保存時の暗号化（At Rest）

### 概要
- **保存されているデータそのものを暗号化**
- データが盗まれても中身を読めないようにする

### 主な対象サービス
- S3
- EBS
- RDS
- DynamoDB
- EFS

---

### S3の暗号化（超頻出）

#### 暗号化方式

| 方式 | 鍵の管理 | 試験での重要度 |
|----|----|----|
| SSE-S3 | S3が管理 | 基本 |
| SSE-KMS | KMSで管理 | ★最重要 |
| SSE-C | 利用者管理 | ほぼ出ない |

#### SSE-KMSが選ばれるケース
- IAMで復号権限を制御したい
- CloudTrailで利用履歴を監査したい
- セキュリティ要件が厳しい

**試験キーワード**
- 「監査」
- 「アクセス制御」
- 「ログを残したい」

→ **SSE-KMS**

---

### EBS / RDS / DynamoDB の暗号化

#### 共通点
- **KMSを使用**
- 作成時に暗号化を有効化するのが基本

#### 注意点（ひっかけ）
- **後から暗号化はできない**
  - EBS：スナップショット経由
  - RDS：スナップショット → 再作成

---

## 2. 通信時の暗号化（In Transit）

### 概要
- **通信経路の盗聴を防ぐ**
- TLS / SSL / HTTPS を使用

---

### ALB + ACM（頻出）

#### ACM（AWS Certificate Manager）
- SSL/TLS証明書を管理
- ALB / CloudFront と連携

**試験での定番フレーズ**
- 「証明書管理を簡単にしたい」
- 「HTTPS通信を実現したい」

→ **ACM**

---

### S3の通信暗号化
- HTTPSがデフォルト
- 「通信を暗号化」＝ HTTPS

---

## 3. AWS KMS（Key Management Service）

### 役割
- 暗号鍵の作成・管理
- IAMと連携したアクセス制御
- CloudTrailによる操作ログ

---

### CMK（カスタマーマスターキー）の種類

| 種類 | 特徴 |
|----|----|
| AWS管理CMK | AWSが管理 |
| カスタマー管理CMK | 利用者が管理（試験向け） |

**試験ポイント**
- 「復号できるユーザーを制御したい」
→ **カスタマー管理CMK**

---

### Envelope Encryption（名前だけ理解）

- データ → データキーで暗号化
- データキー → CMKで暗号化
- KMSは巨大データを直接暗号化しない

---

## 4. 暗号化と認証の違い（超重要）

### SSHキーペアとの違い

| 項目 | SSHキーペア | KMS / S3暗号化 |
|----|----|----|
| 目的 | ログイン認証 | データ保護 |
| 守るもの | アクセス権 | データの中身 |
| SAA出題頻度 | 中 | 高 |

**注意**
- SSHでログインできても、暗号化とは別
- 暗号化＝アクセス制御ではない

---

## 5. 試験でよくある問題パターン

### パターン①
> S3のデータを暗号化し、  
> IAMで復号権限を制御し、  
> 利用履歴を監査したい

**答え**
- SSE-KMS
- カスタマー管理CMK

---

### パターン②
> HTTPS通信を実現し、  
> 証明書管理の運用負荷を下げたい

**答え**
- ALB + ACM

---

### パターン③
> 既存の未暗号化EBSを暗号化したい

**答え**
1. スナップショット作成
2. 暗号化スナップショット作成
3. 新しいEBSを作成

---

## 6. SAA用 暗号化チートシート

- 保存時 → **KMS**
- 通信時 → **TLS / HTTPS**
- S3の厳格要件 → **SSE-KMS**
- 証明書管理 → **ACM**
- 後から暗号化 → **スナップショット経由**

---

## まとめ

暗号化問題は、まず以下を考える。

- **何を守りたい？**
  - データ → KMS
  - 通信 → TLS / ACM
  - ログイン → SSH / IAM

これができれば、  
SAAの暗号化問題はほぼ即答できる。
